<script src="//maps.google.com/maps/api/js?v=3.13&sensor=false&libraries=geometry" type="text/javascript"></script>
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/trunk/richmarker/src/richmarker-compiled.js' type='text/javascript'></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js' type='text/javascript'></script>

<div class="container">
	<div class="row">
		<div class="col-md-12">
			<div class="page-header">
				<h1><%=link_to "Trip Planner - Asheville, NC", root_path %></h1>
			</div>
		</div>
	</div>
	<div class="row row-offcanvas row-offcanvas-right">
		<div class="col-md-5">
			<h3><%= @trip.name %></h3>
			<table class="table table-hover">
			 <thead>
				<tr>
				 <th>Name</th>
				 <th>Description</th>
				 <th></th>
				 <th></th>
				</tr>
			 </thead>

			 <tbody>
				<% @trip.markets.each do |market| %>
				 <tr>
					 <td><%= link_to market.name, market.website %></td>
					 <td><%= market.description %></td>
					 <td><%= image_tag(market.image, height:'100px') %></td>
				 	 <td><%= button_to "Remove", trip_ranking_path(trip_id:@trip.id, market_id:market.id), controller:'rankings', method: :delete, html_options: { class:'btn btn-primary btn-xs' } %></td>
				 </tr>
				<% end %>
			 </tbody>
			</table>
		</div>
		<div class="col-md-7 sidebar-offcanvas" id="sidebar" role="navigation">
			<ul class=list-group"><h3>Activities</h3>
				<% @markets.each do |market| %>
					<li class="list-group-item"><%= link_to(market.name, trip_rankings_path(@trip, market_id:market.id), method: :create) %></li>
				<% end %>
			</ul>
		</div>
	</div>
	
	<hr>

	<div class="container">
		<div id="map" style="height:300px;" ></div>
	</div>
</div>

<script type="text/javascript">
	buildMap(<%=raw @hash.to_json %>);
</script>
